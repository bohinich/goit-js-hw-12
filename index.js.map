{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49365626-6bf9b0bb5948f971197bdaec6\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: PER_PAGE,\n                page: page,\n            },\n        });\n        \n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet lightbox = new SimpleLightbox(\".gallery a\");\n\nexport function showLoader() {\n    loader.classList.add(\"visible\");\n}\n\nexport function hideLoader() {\n    loader.classList.remove(\"visible\");\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function createGallery(images) {\n    if (images.length === 0) {\n        iziToast.error({\n            title: \"Oops!\",\n            message: \"Sorry, no images found. Try again!\",\n            position: \"topRight\",\n        });\n        return;\n    }\n\n    const markup = images\n        .map(\n            (img) => `\n        <a href=\"${img.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n            <div class=\"info\">\n                <p>Likes: ${img.likes}</p>\n                <p>Views: ${img.views}</p>\n                <p>Comments: ${img.comments}</p>\n                <p>Downloads: ${img.downloads}</p>\n            </div>\n        </a>\n    `\n        )\n        .join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.add(\"visible\");\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.remove(\"visible\");\n}\n\n\nexport function showEndMessage() {\n    const endMessage = document.querySelector(\".end-message\");\n    if (endMessage) {\n        endMessage.style.display = \"block\";  \n    }\n}\n\nexport function hideEndMessage() {\n    const endMessage = document.querySelector(\".end-message\");\n    if (endMessage) {\n        endMessage.style.display = \"none\";  \n    }\n}\n","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { \n    createGallery, \n    clearGallery, \n    showLoader, \n    hideLoader, \n    showLoadMoreButton, \n    hideLoadMoreButton,\n    showEndMessage, \n    hideEndMessage  \n} from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\n\nconst form = document.querySelector(\".search-form\");\nconst searchInput = form.querySelector(\"input[name='searchQuery']\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst endMessage = document.querySelector(\".end-message\");  \n\nlet query = \"\";\nlet page = 1;\nconst perPage = 15;\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    query = searchInput.value.trim();\n    if (query === \"\") {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"Please enter a search term!\",\n            position: \"topRight\",\n        });\n        return;\n    }\n\n    page = 1;\n    clearGallery(); \n    hideLoadMoreButton();\n    hideEndMessage();  \n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: \"Oops!\",\n                message: \"Sorry, no images found. Try again!\",\n                position: \"topRight\",\n            });\n            return;\n        }\n        createGallery(data.hits);\n        if (data.totalHits > perPage) {\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again!\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader();\n    }\n\n    form.reset();\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    page += 1;\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        createGallery(data.hits);\n        if (page * perPage >= data.totalHits) {\n            hideLoadMoreButton();\n            showEndMessage();  \n            iziToast.info({\n                title: \"End of results\",\n                message: \"You've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        } else {\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong. Please try again!\",\n            position: \"topRight\",\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\nfunction smoothScroll() {\n    const card = document.querySelector('.gallery-item');\n    if (card) {\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    smoothScroll();\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","axios","error","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","showLoader","hideLoader","clearGallery","createGallery","images","iziToast","markup","img","showLoadMoreButton","hideLoadMoreButton","showEndMessage","endMessage","hideEndMessage","form","searchInput","perPage","event","data","smoothScroll","card","cardHeight"],"mappings":"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"}