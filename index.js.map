{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49365626-6bf9b0bb5948f971197bdaec6\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page = 1) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: PER_PAGE,\n                page,\n            },\n        });\n\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreButton = document.querySelector(\".load-more\");\n\nlet lightbox = new SimpleLightbox(\".gallery a\");\n\nexport function showLoader() {\n    loader.style.display = \"block\";\n}\n\nexport function hideLoader() {\n    loader.style.display = \"none\";\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function renderImages(images) {\n    if (images.length === 0) {\n        iziToast.error({\n            title: \"Oops!\",\n            message: \"Sorry, no images found. Try again!\",\n            position: \"topRight\",\n        });\n        return;\n    }\n\n    const markup = images\n        .map(\n            (img) => `\n        <a href=\"${img.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n            <div class=\"info\">\n                <p>Likes: ${img.likes}</p>\n                <p>Views: ${img.views}</p>\n                <p>Comments: ${img.comments}</p>\n                <p>Downloads: ${img.downloads}</p>\n            </div>\n        </a>\n    `\n        )\n        .join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nexport function showLoadMoreButton() {\n    loadMoreButton.style.display = \"block\";\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreButton.style.display = \"none\";\n}\n\nexport function showEndOfResultsMessage() {\n    iziToast.info({\n        title: \"End\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n    });\n}\n\nexport function scrollToNewImages() {\n    const { height } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: height * 2,\n        behavior: \"smooth\",\n    });\n}\n","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { \n    renderImages, \n    clearGallery, \n    showLoader, \n    hideLoader, \n    showLoadMoreButton, \n    hideLoadMoreButton, \n    showEndOfResultsMessage, \n    scrollToNewImages \n} from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".form\");\nconst searchInput = form.querySelector(\"input[name='search-text']\");\nconst loadMoreButton = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    query = searchInput.value.trim();\n    if (query === \"\") return;\n\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        totalHits = data.totalHits;\n        \n        if (data.hits.length === 0) return;\n        \n        renderImages(data.hits);\n        \n        if (totalHits > 15) {\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        console.error(\"Search error:\", error);\n    } finally {\n        hideLoader();\n    }\n\n    form.reset();\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n    page++;\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        renderImages(data.hits);\n        scrollToNewImages();\n\n        if (page * 15 >= totalHits) {\n            hideLoadMoreButton();\n            showEndOfResultsMessage();\n        } else {\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        console.error(\"Error loading more images:\", error);\n    } finally {\n        hideLoader();\n    }\n});\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","axios","error","gallery","loader","loadMoreButton","lightbox","SimpleLightbox","showLoader","hideLoader","clearGallery","renderImages","images","iziToast","markup","img","showLoadMoreButton","hideLoadMoreButton","showEndOfResultsMessage","scrollToNewImages","height","form","searchInput","totalHits","event","data"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEV,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CACpD,GAAI,CAaA,OAZiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAAG,CACH,CACb,CAAS,GAEe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCpBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAEvC,SAASC,GAAa,CACzBJ,EAAO,MAAM,QAAU,OAC3B,CAEO,SAASK,GAAa,CACzBL,EAAO,MAAM,QAAU,MAC3B,CAEO,SAASM,GAAe,CAC3BP,EAAQ,UAAY,EACxB,CAEO,SAASQ,EAAaC,EAAQ,CACjC,GAAIA,EAAO,SAAW,EAAG,CACrBC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,qCACT,SAAU,UACtB,CAAS,EACD,MACH,CAED,MAAMC,EAASF,EACV,IACIG,GAAQ;AAAA,mBACFA,EAAI,aAAa;AAAA,wBACZA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,4BAE9BA,EAAI,KAAK;AAAA,4BACTA,EAAI,KAAK;AAAA,+BACNA,EAAI,QAAQ;AAAA,gCACXA,EAAI,SAAS;AAAA;AAAA;AAAA,KAIpC,EACA,KAAK,EAAE,EAEZZ,EAAQ,mBAAmB,YAAaW,CAAM,EAC9CR,EAAS,QAAO,CACpB,CAEO,SAASU,GAAqB,CACjCX,EAAe,MAAM,QAAU,OACnC,CAEO,SAASY,GAAqB,CACjCZ,EAAe,MAAM,QAAU,MACnC,CAEO,SAASa,GAA0B,CACtCL,EAAS,KAAK,CACV,MAAO,MACP,QAAS,6DACT,SAAU,UAClB,CAAK,CACL,CAEO,SAASM,GAAoB,CAChC,KAAM,CAAE,OAAAC,CAAQ,EAAGjB,EAAQ,kBAAkB,sBAAqB,EAClE,OAAO,SAAS,CACZ,IAAKiB,EAAS,EACd,SAAU,QAClB,CAAK,CACL,CC/DA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAcD,EAAK,cAAc,2BAA2B,EAC5DhB,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIN,EAAQ,GACRC,EAAO,EACPuB,EAAY,EAEhBF,EAAK,iBAAiB,SAAU,MAAOG,GAAU,CAI7C,GAHAA,EAAM,eAAc,EAEpBzB,EAAQuB,EAAY,MAAM,OACtBvB,IAAU,GAEd,CAAAC,EAAO,EACPU,IACAO,IACAT,IAEA,GAAI,CACA,MAAMiB,EAAO,MAAM3B,EAAiBC,EAAOC,CAAI,EAG/C,GAFAuB,EAAYE,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,OAE5Bd,EAAac,EAAK,IAAI,EAElBF,EAAY,IACZP,GAEP,OAAQd,EAAO,CACZ,QAAQ,MAAM,gBAAiBA,CAAK,CAC5C,QAAc,CACNO,GACH,CAEDY,EAAK,MAAK,EACd,CAAC,EAEDhB,EAAe,iBAAiB,QAAS,SAAY,CACjDL,IACAQ,IACAS,IAEA,GAAI,CACA,MAAMQ,EAAO,MAAM3B,EAAiBC,EAAOC,CAAI,EAC/CW,EAAac,EAAK,IAAI,EACtBN,IAEInB,EAAO,IAAMuB,GACbN,IACAC,KAEAF,GAEP,OAAQd,EAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAK,CACzD,QAAc,CACNO,GACH,CACL,CAAC"}